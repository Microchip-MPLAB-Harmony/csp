<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN">
<html>
<head>
<title>Using the Library</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoadEx('frames.html', 'topic', '02338.html');" onmousedown="onBodyMouseDown();">

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="03831.html" target="topic">Peripheral Library Overview</a> &gt; <a href="03423.html" target="topic">Peripheral Libraries Help</a> &gt; <a href="03830.html" target="topic">Peripheral Libraries</a> &gt; <a href="02333.html" target="topic">FREQM Peripheral Library Help</a> &gt; <a href="02338.html" target="topic">Using the Library</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
Microchip 32-bit Chip Support Package</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.html" target="tocidx">Contents</a> | <a href="03831.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="02328.html" target="topic">Previous</a> | <a href="02333.html" target="topic">Up</a> | <a href="02334.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: FREQM U2257 Using the Library Topic Title: Using the Library)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table><div class="Element5">
Using the Library</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<a name="PageContent"></a><div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
AFEC converts all the enabled channels on software or hardware triggers. It provides both polling and callback methods to indicate the end of conversion to read the converted data from the result registers.</p>
<ul class="Element630">
<li class="Element600">With polling, the application will need to continuously poll to check if the conversion is completed.</li>
<li class="Element600">With callback, the registered callback function will be called once the conversion is completed. This means the application do not have to poll continuously.</li>
</ul><p class="Element10">
&nbsp;</p>
<p class="Element10">
<strong>Callback method</strong>&nbsp;</p>
<p class="Element10">
This example demonstrates frequency measurement with callback.&nbsp;</p>
<p class="Element10">
&nbsp;</p><div class="Element13"><div class="Element12"><pre class="Element12"><strong><span style="color: #000080">void</span></strong> AFEC_EventHandler(uintptr_t context)
{
    uint32_t frequencyInHertz;

    <strong><span style="color: #000080">if</span></strong>(FREQM_ErrorGet() == FREQM_ERROR_NONE)
    {
        frequencyInHertz = FREQM_FrequencyGet();
    }
}


<strong><span style="color: #000080">int</span></strong> main(<strong><span style="color: #000080">void</span></strong>)
{
    FREQM_CallbackRegister(&amp;FREQ_EventHandler,(uintptr_t)NULL);

    FREQM_MeasurementStart();

}</pre></div></div>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
<strong>Polling method</strong>&nbsp;</p>
<p class="Element10">
This example demonstrates frequency measurement with polling </p><div class="Element13"><div class="Element12"><pre class="Element12">
uint32_t frequencyInHertz;

<i><span style="color: #008000">/* Start Frequency Measurement */</span></i>
FREQM_MeasurementStart();

<i><span style="color: #008000">/* Wait for measurement completion */</span></i>
<strong><span style="color: #000080">while</span></strong>(FREQM_IsBusy());

<i><span style="color: #008000">/* Read the result */</span></i>
<strong><span style="color: #000080">if</span></strong>(FREQM_ErrorGet() == FREQM_ERROR_NONE)
{
    frequencyInHertz = FREQM_FrequencyGet();
}</pre></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="03831.html" target="topic">Peripheral Library Overview</a> &gt; <a href="03423.html" target="topic">Peripheral Libraries Help</a> &gt; <a href="03830.html" target="topic">Peripheral Libraries</a> &gt; <a href="02333.html" target="topic">FREQM Peripheral Library Help</a> &gt; <a href="02338.html" target="topic">Using the Library</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element3">
Microchip 32-bit Chip Support Package</div>
</td><td width="25%">
<div class="Element4">
<a href="contents.html" target="tocidx">Contents</a> | <a href="03831.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element91">
<a href="02328.html" target="topic">Previous</a> | <a href="02333.html" target="topic">Up</a> | <a href="02334.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: FREQM U2257 Using the Library Topic Title: Using the Library)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>