<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN">
<html>
<head>
<title>Using the Library</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoadEx('frames.html', 'topic', '01460.html');" onmousedown="onBodyMouseDown();">

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="03831.html" target="topic">Peripheral Library Overview</a> &gt; <a href="03423.html" target="topic">Peripheral Libraries Help</a> &gt; <a href="03830.html" target="topic">Peripheral Libraries</a> &gt; <a href="01457.html" target="topic">DIVAS Peripheral Library Help</a> &gt; <a href="01460.html" target="topic">Using the Library</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
Microchip 32-bit Chip Support Package</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.html" target="tocidx">Contents</a> | <a href="03831.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="01454.html" target="topic">Previous</a> | <a href="01457.html" target="topic">Up</a> | <a href="01458.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: DIVAS U2258 Using the Library Topic Title: Using the Library)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table><div class="Element5">
Using the Library</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<a name="PageContent"></a><div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
This peripheral library provides an interface for the Divide and Square Root Accelerator on the device.The DIVAS is a programmable 32-bit signed or unsigned hardware divider and a 32-bit unsigned square root hardware engine. When running signed division, both the input and the result will be in two's complement format. The result of signed division is that the remainder has the same sign as the dividend and the quotient is negative if the dividend and divisor have opposite signs. When the square root input register is programmed, the square root function starts and the result will be stored in the Remainder register.&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
There are two ways to use DIVAS in firmware:</p>
<ul class="Element630">
<li class="Element600">Peripheral APIs</li>
<li class="Element600">Operator overloading</li>
</ul><p class="Element10">
&nbsp;</p>
<p class="Element10">
<strong>Peripheral APIs</strong>&nbsp;</p>
<p class="Element10">
DIVAS can be accessed by application program interfaces like any other peripheral. Refer to Library Interface section for API details.&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
<strong>Compiler Operator Overloading</strong>&nbsp;</p>
<p class="Element10">
A simpler way of using DIVAS is making it invisible to the programmer. This can be achieved by replacing the back end for compiler intrinsic operators ‘/’ and ‘%’. When compiler compiles the statements containing these operators, it uses DIVAS APIs instead of library generated code automatically. Unfortunately, it is not possible for square root because square root does not have a C intrinsic operator.&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
The operation is implemented automatically by EABI (Enhanced Application Binary Interface). EABI is a standard calling convention, which is defined by ARM. The four functions interface can implement division and mod operation in EABI.&nbsp;</p>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
The following prototypes for EABI division operation in GNUC tool chain: </p><div class="Element13"><div class="Element12"><pre class="Element12"><strong><span style="color: #000080">int</span></strong> __aeabi_idiv(<strong><span style="color: #000080">int</span></strong> numerator, <strong><span style="color: #000080">int</span></strong> denominator);
<strong><span style="color: #000080">unsigned</span></strong> __aeabi_uidiv(<strong><span style="color: #000080">unsigned</span></strong> numerator, <strong><span style="color: #000080">unsigned</span></strong> denominator);
uint64_t __aeabi_idivmod( <strong><span style="color: #000080">int</span></strong> numerator, <strong><span style="color: #000080">int</span></strong> denominator);
uint64_t uidiv_return __aeabi_uidivmod( <strong><span style="color: #000080">unsigned</span></strong> numerator, <strong><span style="color: #000080">unsigned</span></strong> denominator);</pre></div></div>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
By using DIVAS module in the four functions body, the user can transparently access the DIVAS module when writing normal C code. For example: </p><div class="Element13"><div class="Element12"><pre class="Element12"><strong><span style="color: #000080">void</span></strong> division(int32_t b, int32_t c)
{
   int32_t a;
   a = b / c;
   <strong><span style="color: #000080">return</span></strong> a;
}</pre></div></div>
<p class="Element10">
&nbsp;</p>
<p class="Element10">
Similarly, the user can use the &quot;a = b % c;&quot; symbol to implement the operation with DIVAS, and needn't to care about the internal operation process.</p></div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="03831.html" target="topic">Peripheral Library Overview</a> &gt; <a href="03423.html" target="topic">Peripheral Libraries Help</a> &gt; <a href="03830.html" target="topic">Peripheral Libraries</a> &gt; <a href="01457.html" target="topic">DIVAS Peripheral Library Help</a> &gt; <a href="01460.html" target="topic">Using the Library</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element3">
Microchip 32-bit Chip Support Package</div>
</td><td width="25%">
<div class="Element4">
<a href="contents.html" target="tocidx">Contents</a> | <a href="03831.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element91">
<a href="01454.html" target="topic">Previous</a> | <a href="01457.html" target="topic">Up</a> | <a href="01458.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: DIVAS U2258 Using the Library Topic Title: Using the Library)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>